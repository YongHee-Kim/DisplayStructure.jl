@testset "DisplayArray" begin

    io = IOBuffer()

    array = DS.DisplayArray(10, 40, background='.')

    @test repr(array) == "DisplayArray(" *
        "size=(10, 40), " *
        "background char=Char(46)" *
    ")"

    DS.render(io, array)
    @test String(take!(io)) ==
        "\e[$(TERM_SIZE[1]);1H\e[1;1H" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[$(TERM_SIZE[1]);1H"

    array[6, 8] = '噢'
    DS.render(io, array)
    @test String(take!(io)) ==
        "\e[$(TERM_SIZE[1]);1H\e[1;1H" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[s.......噢...............................\e[0m\e[u\e[1B" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[$(TERM_SIZE[1]);1H"

    array[4:6, 8:19] = "這是一段\n非常感性的\n字串"
    DS.render(io, array)
    @test String(take!(io)) ==
        "\e[$(TERM_SIZE[1]);1H\e[1;1H" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[s.......這是一段.........................\e[0m\e[u\e[1B" *
        "\e[s.......非常感性的.......................\e[0m\e[u\e[1B" *
        "\e[s.......字串.............................\e[0m\e[u\e[1B" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[s........................................\e[0m\e[u\e[1B" *
        "\e[$(TERM_SIZE[1]);1H"

    # style
    R, G, B = color = (255, 0, 0)
    style = [:bold, :underline, :blink]
    DS.render(io, array, style=style, color=color)
    println(stdout)
    @test String(take!(io)) ==
        "\e[$(TERM_SIZE[1]);1H\e[1;1H" *
        "\e[s\e[38;2;$(R);$(G);$(B)m" *
        "\e[1m\e[4m\e[5m" *
        "........................................\e[0m\e[u\e[1B" *
        "\e[s\e[38;2;$(R);$(G);$(B)m" *
        "\e[1m\e[4m\e[5m" *
        "........................................\e[0m\e[u\e[1B" *
        "\e[s\e[38;2;$(R);$(G);$(B)m" *
        "\e[1m\e[4m\e[5m" *
        "........................................\e[0m\e[u\e[1B" *
        "\e[s\e[38;2;$(R);$(G);$(B)m" *
        "\e[1m\e[4m\e[5m" *
        ".......這是一段.........................\e[0m\e[u\e[1B" *
        "\e[s\e[38;2;$(R);$(G);$(B)m" *
        "\e[1m\e[4m\e[5m" *
        ".......非常感性的.......................\e[0m\e[u\e[1B" *
        "\e[s\e[38;2;$(R);$(G);$(B)m" *
        "\e[1m\e[4m\e[5m" *
        ".......字串.............................\e[0m\e[u\e[1B" *
        "\e[s\e[38;2;$(R);$(G);$(B)m" *
        "\e[1m\e[4m\e[5m" *
        "........................................\e[0m\e[u\e[1B" *
        "\e[s\e[38;2;$(R);$(G);$(B)m" *
        "\e[1m\e[4m\e[5m" *
        "........................................\e[0m\e[u\e[1B" *
        "\e[s\e[38;2;$(R);$(G);$(B)m" *
        "\e[1m\e[4m\e[5m" *
        "........................................\e[0m\e[u\e[1B" *
        "\e[s\e[38;2;$(R);$(G);$(B)m" *
        "\e[1m\e[4m\e[5m" *
        "........................................\e[0m\e[u\e[1B" *
        "\e[$(TERM_SIZE[1]);1H"

end
